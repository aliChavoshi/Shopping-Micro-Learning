@if(basketService.basket()){
@let products = basketService.basket();
<div class="main-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="floating-elements">
      <div class="floating-shape shape1"></div>
      <div class="floating-shape shape2"></div>
      <div class="floating-shape shape3"></div>
    </div>
    <h1 class="display-4 fw-bold mb-3">
      <i class="fas fa-shopping-cart me-3"></i>
      سبد خرید شما
    </h1>
    <p class="lead mb-0">محصولات انتخابی خود را مدیریت کنید</p>
  </div>

  <!-- Cart Content -->
  <div class="cart-content">
    <!-- Cart Items Section -->
    <div class="cart-items-section">
      <div class="d-flex justify-content-between align-items-center align-content-center">
        <h3 class="section-title">
          <i class="fas fa-list me-2"></i>
          محصولات سبد خرید (<span id="itemCount">{{products?.items?.length ?? 0}}</span> کالا)
        </h3>
        <button class="remove-btn text-nowrap mb-3" (click)="deleteBasket()">
          <i class="fas fa-trash me-1"></i>
          حذف کل سبد خرید
        </button>
      </div>
      <div id="cartItems">
        <!-- Cart Item 1 -->
        @for (item of products?.items; track $index) {
        <div class="cart-item d-flex align-items-center" data-id="1">
          <div class="product-image">
            <img [src]="item?.imageFile" class="img-thumbnail" alt="404">
          </div>
          <div class="product-info">
            <div class="product-name">{{item.productName}}</div>
            <!-- <div class="product-brand">{{item.}}</div> -->
            <div class="product-price">$ {{item.price | number}}</div>
            <div class="d-flex align-items-center justify-content-between">
              <div class="quantity-section">
                <label class="fw-semibold me-2">تعداد:</label>
                <div class="quantity-controls">
                  <button class="quantity-btn minus-btn" (click)="decreaseItemQuantity(item)">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input type="number" class="quantity-input" [value]="item.quantity" min="1" max="10" readonly
                    data-price="45000000">
                  <button class="quantity-btn plus-btn" (click)="increaseItemQuantity(item)">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
              </div>
              <button class="remove-btn" (click)="removeItemFromBasket(item.productId)">
                <i class="fas fa-trash me-1"></i>
                حذف
              </button>
            </div>
          </div>
        </div>
        }
      </div>

      <div class="text-center mt-4">
        <a href="#" class="continue-shopping">
          <i class="fas fa-arrow-right me-2"></i>
          ادامه خرید
        </a>
      </div>
    </div>

    <app-basket-total></app-basket-total>
  </div>
</div>
}
@else{
<!-- Empty Cart Message (Hidden by default) -->
<div class="main-container">
  <!-- Cart Items Section -->
  <div class="cart-items-section">
    <div class="empty-cart text-dark" id="emptyCart">
      <i class="fas fa-shopping-cart"></i>
      <h3>سبد خرید شما خالی است</h3>
      <p>هنوز محصولی به سبد خرید خود اضافه نکرده‌اید</p>
      <a href="#" class="continue-shopping text-dark">ادامه خرید</a>
    </div>
  </div>
</div>
}
